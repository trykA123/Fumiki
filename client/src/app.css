@import "tailwindcss";

@plugin "tailwindcss-animate";

@theme {
    --color-surface-0: var(--surface-0);
    --color-surface-1: var(--surface-1);
    --color-surface-2: var(--surface-2);
    --color-surface-3: var(--surface-3);
    --color-surface-4: var(--surface-4);
    --color-surface-5: var(--surface-5);

    --color-text-primary: var(--text-primary);
    --color-text-secondary: var(--text-secondary);
    --color-text-muted: var(--text-muted);
    --color-text-inverse: var(--text-inverse);

    --color-accent: var(--accent);
    --color-accent-hover: var(--accent-hover);
    --color-accent-dim: var(--accent-dim);
    --color-accent-subtle: var(--accent-subtle);
    --color-accent-glow: var(--accent-glow);
    --color-accent-glow-strong: var(--accent-glow-strong);
    --color-accent-border: var(--accent-border);
    --color-accent-text: var(--accent-text);

    --color-success: var(--success);
    --color-warning: var(--warning);
    --color-error: var(--error);
    --color-info: var(--info);

    --color-border-subtle: var(--border-subtle);
    --color-border-medium: var(--border-medium);
    --color-border-strong: var(--border-strong);

    --spacing-0: var(--space-0);
    --spacing-1: var(--space-1);
    --spacing-2: var(--space-2);
    --spacing-3: var(--space-3);
    --spacing-4: var(--space-4);
    --spacing-5: var(--space-5);
    --spacing-6: var(--space-6);
    --spacing-7: var(--space-7);
    --spacing-8: var(--space-8);
    --spacing-9: var(--space-9);
    --spacing-10: var(--space-10);
    --spacing-11: var(--space-11);
    --spacing-12: var(--space-12);
    --spacing-13: var(--space-13);
    --spacing-14: var(--space-14);

    --font-display: var(--font-display);
    --font-body: var(--font-body);
    --font-mono: var(--font-mono);

    --font-size-text-xs: var(--text-xs);
    --font-size-text-sm: var(--text-sm);
    --font-size-text-base: var(--text-base);
    --font-size-text-md: var(--text-md);
    --font-size-text-lg: var(--text-lg);
    --font-size-text-xl: var(--text-xl);
    --font-size-text-2xl: var(--text-2xl);
    --font-size-text-3xl: var(--text-3xl);
    --font-size-text-4xl: var(--text-4xl);

    --shadow-color: var(--shadow-color);
    --shadow-sm: var(--shadow-sm);
    --shadow-md: var(--shadow-md);
    --shadow-lg: var(--shadow-lg);

    --radius-sm: var(--radius-sm);
    --radius-md: var(--radius);
    --radius-lg: var(--radius-lg);

    --z-index-dropdown: var(--z-dropdown);
    --z-index-sticky: var(--z-sticky);
    --z-index-overlay: var(--z-overlay);
    --z-index-modal: var(--z-modal);
    --z-index-toast: var(--z-toast);
    --z-index-tooltip: var(--z-tooltip);

    --breakpoint-sm: 375px;
    --breakpoint-md: 640px;
    --breakpoint-lg: 768px;
    --breakpoint-xl: 1024px;
    --breakpoint-2xl: 1280px;

    --animate-duration-fast: 150ms;
    --animate-duration-normal: 200ms;
    --animate-duration-slow: 300ms;
    --animate-duration-very-slow: 600ms;
}

@layer base {

    :root {
        /* --- SPACING SCALE (FUMIKI_SPACING.md) --- */
        --space-0: 0px;
        --space-1: 4px;
        --space-2: 8px;
        --space-3: 12px;
        --space-4: 16px;
        --space-5: 20px;
        --space-6: 24px;
        --space-7: 32px;
        --space-8: 40px;
        --space-9: 48px;
        --space-10: 56px;
        --space-11: 64px;
        --space-12: 80px;
        --space-13: 96px;
        --space-14: 128px;

        /* --- TYPOGRAPHY SCALE (FUMIKI_TYPOGRAPHY.md) --- */
        --text-xs: 11px;
        --text-sm: 13px;
        --text-base: 15px;
        --text-md: 16px;
        --text-lg: 18px;
        --text-xl: 22px;
        --text-2xl: 28px;
        --text-3xl: 34px;
        --text-4xl: 42px;

        /* Semantic Typography Tokens */
        --heading-hero-size: var(--text-4xl);
        --heading-hero-weight: 300;
        --heading-hero-line-height: 1.15;
        --heading-hero-letter-spacing: -0.01em;

        --heading-section-size: var(--text-xl);
        --heading-section-weight: 600;
        --heading-section-line-height: 1.3;
        --heading-section-letter-spacing: 0;

        --heading-card-size: var(--text-lg);
        --heading-card-weight: 600;
        --heading-card-line-height: 1.3;
        --heading-card-letter-spacing: 0;

        --heading-book-size: var(--text-base);
        --heading-book-weight: 600;
        --heading-book-line-height: 1.3;

        --body-size: var(--text-base);
        --body-weight: 400;
        --body-line-height: 1.6;

        --body-sm-size: var(--text-sm);
        --body-sm-weight: 400;
        --body-sm-line-height: 1.5;

        --label-size: var(--text-xs);
        --label-weight: 700;
        --label-line-height: 1.4;
        --label-letter-spacing: 0.08em;
        --label-transform: uppercase;

        --data-size: var(--text-sm);
        --data-weight: 500;
        --data-line-height: 1;

        --data-lg-size: var(--text-4xl);
        --data-lg-weight: 300;
        --data-lg-line-height: 1;

        /* Ebook Reader Typography */
        --reader-font: 'Georgia', serif;
        --reader-font-size: 18px;
        --reader-line-height: 1.8;
        --reader-max-width: 680px;
        --reader-margin: var(--space-5);
        --reader-paragraph-spacing: 0.8em;

        /* --- Z-INDEX SCALE (FUMIKI_SPACING.md) --- */
        --z-base: 0;
        --z-dropdown: 100;
        --z-sticky: 200;
        --z-overlay: 300;
        --z-modal: 400;
        --z-toast: 500;
        --z-tooltip: 600;

        /* --- COMPUTED ACCENTS (FUMIKI_COLORS.md) --- */
        --accent: hsl(var(--accent-h) var(--accent-s) var(--accent-l));
        --accent-hover: hsl(var(--accent-h) var(--accent-s) calc(var(--accent-l) + 8%));
        --accent-dim: hsl(var(--accent-h) var(--accent-s) calc(var(--accent-l) - 18%));
        --accent-subtle: hsl(var(--accent-h) var(--accent-s) calc(var(--accent-l) - 30%));
        --accent-glow: hsla(var(--accent-h) var(--accent-s) var(--accent-l) / 0.08);
        --accent-glow-strong: hsla(var(--accent-h) var(--accent-s) var(--accent-l) / 0.15);
        --accent-border: hsla(var(--accent-h) var(--accent-s) var(--accent-l) / 0.20);
        --accent-text: hsl(var(--accent-h) var(--accent-s) calc(var(--accent-l) + 15%));
    }

    /* =========================================================================
     墨 SUMI - INK THEME
     ========================================================================= */
    [data-theme="sumi"] {
        /* Typography */
        --font-display: 'Noto Serif JP', serif;
        --font-body: 'DM Sans', system-ui, sans-serif;
        --font-mono: 'JetBrains Mono', monospace;

        --heading-hero-weight: 200;
        --heading-hero-letter-spacing: 0.04em;
        --heading-section-weight: 400;
        --heading-section-letter-spacing: 0.06em;
        --heading-card-weight: 400;
        --heading-card-letter-spacing: 0.03em;
        --heading-book-weight: 400;
        --heading-book-letter-spacing: 0.02em;
        --label-letter-spacing: 0.15em;
        --data-lg-weight: 200;

        /* Surfaces */
        --surface-0: hsl(250 15% 3%);
        --surface-1: hsl(250 12% 6%);
        --surface-2: hsl(250 10% 9%);
        --surface-3: hsl(250 8% 13%);
        --surface-4: hsl(250 7% 17%);
        --surface-5: hsl(250 6% 22%);

        /* Text */
        --text-primary: hsl(40 15% 90%);
        --text-secondary: hsl(40 10% 65%);
        --text-muted: hsl(250 8% 40%);
        --text-inverse: hsl(250 15% 5%);

        /* Accent (Vermillion Red) */
        --accent-h: 355;
        --accent-s: 72%;
        --accent-l: 46%;

        /* Semantic */
        --success: hsl(155 45% 42%);
        --warning: hsl(40 80% 50%);
        --error: hsl(0 65% 50%);
        --info: hsl(210 50% 55%);

        /* Borders */
        --border-subtle: hsla(250 10% 50% / 0.08);
        --border-medium: hsla(250 10% 50% / 0.14);
        --border-strong: hsla(250 10% 50% / 0.22);
        --radius: 2px;
        --radius-sm: 1px;
        --radius-lg: 2px;
        /* Sumi keeps it sharp */

        /* Shadows */
        --shadow-color: hsla(250 30% 5% / 0.5);
        --shadow-sm: 0 1px 3px var(--shadow-color);
        --shadow-md: 0 4px 12px var(--shadow-color);
        --shadow-lg: 0 8px 32px var(--shadow-color);

        /* Layout Spacing Overrides */
        --card-padding: var(--space-5);
        --card-gap: var(--space-4);
        --section-gap: var(--space-8);
        --page-padding-mobile: var(--space-4);
        --page-padding-tablet: var(--space-7);
        --page-padding-desktop: var(--space-8);
        --content-max-width: 860px;
        --list-item-padding: var(--space-3) var(--space-4);
        --list-item-gap: 2px;
        --element-gap: var(--space-3);
    }

    /* =========================================================================
     紙 KAMI - PAPER THEME
     ========================================================================= */
    [data-theme="kami"] {
        /* Typography */
        --font-display: 'Crimson Pro', Georgia, serif;
        --font-body: 'DM Sans', system-ui, sans-serif;
        --font-mono: 'JetBrains Mono', monospace;

        --heading-hero-weight: 300;
        --heading-hero-letter-spacing: -0.01em;
        --heading-section-weight: 500;
        --heading-section-letter-spacing: 0;
        --heading-card-weight: 600;
        --heading-card-letter-spacing: 0;
        --heading-book-weight: 500;
        --label-letter-spacing: 0.08em;
        --data-lg-weight: 300;

        /* Surfaces */
        --surface-0: hsl(38 35% 93%);
        --surface-1: hsl(38 30% 89%);
        --surface-2: hsl(38 25% 85%);
        --surface-3: hsl(38 18% 78%);
        --surface-4: hsl(38 14% 70%);
        --surface-5: hsl(38 10% 60%);

        /* Text */
        --text-primary: hsl(25 30% 14%);
        --text-secondary: hsl(25 15% 35%);
        --text-muted: hsl(30 10% 55%);
        --text-inverse: hsl(38 35% 93%);

        /* Accent (Ink Brushstroke) */
        --accent-h: 30;
        --accent-s: 15%;
        --accent-l: 18%;

        /* Semantic */
        --success: hsl(140 40% 30%);
        --warning: hsl(35 80% 45%);
        --error: hsl(0 60% 42%);
        --info: hsl(205 45% 40%);

        /* Borders */
        --border-subtle: hsla(30 15% 30% / 0.08);
        --border-medium: hsla(30 15% 30% / 0.14);
        --border-strong: hsla(30 15% 30% / 0.22);
        --radius: 10px;
        --radius-sm: 4px;
        --radius-lg: 12px;

        /* Shadows (warmer, softer) */
        --shadow-color: hsla(30 30% 20% / 0.12);
        --shadow-sm: 0 1px 3px var(--shadow-color);
        --shadow-md: 0 4px 12px var(--shadow-color);
        --shadow-lg: 0 8px 24px var(--shadow-color);

        /* Layout Spacing Overrides */
        --card-padding: var(--space-6);
        --card-gap: var(--space-5);
        --section-gap: var(--space-9);
        --page-padding-mobile: var(--space-5);
        --page-padding-tablet: var(--space-8);
        --page-padding-desktop: var(--space-9);
        --content-max-width: 740px;
        --list-item-padding: var(--space-4) var(--space-5);
        --list-item-gap: var(--space-2);
        --element-gap: var(--space-4);
    }

    /* =========================================================================
     森 MORI - FOREST THEME
     ========================================================================= */
    [data-theme="mori"] {
        /* Typography */
        --font-display: 'DM Sans', system-ui, sans-serif;
        --font-body: 'DM Sans', system-ui, sans-serif;
        --font-mono: 'JetBrains Mono', monospace;

        --heading-hero-weight: 700;
        --heading-hero-letter-spacing: -0.02em;
        --heading-section-weight: 700;
        --heading-section-letter-spacing: -0.01em;
        --heading-card-weight: 600;
        --heading-book-weight: 600;
        --label-letter-spacing: 0.06em;
        --data-lg-weight: 400;

        /* Surfaces */
        --surface-0: hsl(150 25% 5%);
        --surface-1: hsl(150 20% 8%);
        --surface-2: hsl(150 16% 11%);
        --surface-3: hsl(148 12% 16%);
        --surface-4: hsl(145 10% 21%);
        --surface-5: hsl(142 8% 27%);

        /* Text */
        --text-primary: hsl(80 10% 88%);
        --text-secondary: hsl(90 8% 62%);
        --text-muted: hsl(145 6% 38%);
        --text-inverse: hsl(150 25% 5%);

        /* Accent (Amber) */
        --accent-h: 38;
        --accent-s: 70%;
        --accent-l: 48%;

        /* Semantic */
        --success: hsl(130 50% 40%);
        --warning: hsl(45 75% 50%);
        --error: hsl(0 55% 48%);
        --info: hsl(190 40% 45%);

        /* Borders */
        --border-subtle: hsla(145 12% 40% / 0.08);
        --border-medium: hsla(145 12% 40% / 0.14);
        --border-strong: hsla(145 12% 40% / 0.22);
        --radius: 14px;
        --radius-sm: 8px;
        --radius-lg: 16px;

        /* Shadows (green-tinted) */
        --shadow-color: hsla(150 30% 5% / 0.5);
        --shadow-sm: 0 1px 3px var(--shadow-color);
        --shadow-md: 0 4px 12px var(--shadow-color);
        --shadow-lg: 0 8px 32px var(--shadow-color);

        /* Layout Spacing Overrides */
        --card-padding: var(--space-6);
        --card-gap: var(--space-5);
        --section-gap: var(--space-10);
        --page-padding-mobile: var(--space-5);
        --page-padding-tablet: var(--space-8);
        --page-padding-desktop: var(--space-10);
        --content-max-width: 800px;
        --list-item-padding: var(--space-4) var(--space-5);
        --list-item-gap: var(--space-3);
        --element-gap: var(--space-4);
    }

    /* =========================================================================
     GLOBAL ELEMENTS & DEFAULTS
     ========================================================================= */

    * {
        box-sizing: border-box;
    }

    body {
        background-color: var(--surface-0);
        color: var(--text-primary);
        font-family: var(--font-body);
        font-size: var(--body-size);
        font-weight: var(--body-weight);
        line-height: var(--body-line-height);
        margin: 0;
        transition: background-color 200ms ease, color 200ms ease;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
    }

    /* Kami paper texture on body */
    [data-theme="kami"] body {
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='200'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.03'/%3E%3C/svg%3E");
    }

    @media (prefers-reduced-motion: reduce) {

        *,
        *::before,
        *::after {
            animation-duration: 0.01ms !important;
            transition-duration: 0.01ms !important;
        }
    }

}